{"version":3,"sources":["webpack:///src/app/services/shoup-hour-services/network/api.service.ts","webpack:///src/models/models-shop-hour/constants.models.ts","webpack:///src/models/models-shop-hour/helper.models.ts","webpack:///src/models/models-shop-hour/notification.models.ts","webpack:///src/models/models-shop-hour/rating-summary.models.ts"],"names":["ApiService","config","http","reviewedIds","Array","uuid","platform","currency_icon","getSetting","locale","getReviewedProductIds","authToken","tokenToUse","getToken","savedLanguageCode","getLanguageDefault","myHeaders","String","availableLanguages","code","toLowerCase","setupHeaders","get","pipe","data","indiaIndex","unshift","splice","handleError","url","headers","apiBase","supportRequest","post","checkUserRequest","socialLoginRequest","setupUserMe","loginTokenRequest","signUpRequest","updateRequest","put","uId","rateRequest","JSON","stringify","scope","length","cat","setupCategory","parentId","pro","setupProduct","query","page","reloadSetting","urlParams","URLSearchParams","append","toString","categoryId","type","vendorId","productId","address","id","orderRequest","couponCode","orderId","reloadItemsReviewed","setupOrder","pageNo","order","ratingSummaries","defaultArray","summary","ratingSummaryResult","rounded_rating","total","percent","total_ratings","getLocale","review","created_at","formatTimestampDate","rr","scheduled_on","total_toshow","Number","toFixed","subtotal_toshow","subtotal","delivery_fee","delivery_fee_toshow","discount","discount_toshow","taxes","taxes_toshow","products","product","vendor_product","price","priceToShow","images","mediaurls","imgObj","push","reviewed","includes","vendor","image","delivery","user","image_url","category","ratings","ratings_count","vendorText","vendor_products","vp","sale_price","sale_priceToShow","name","substring","categories","operation","result","error","console","log","message","providedIn","Constants","KEY_DEFAULT_LANGUAGE","KEY_USER","KEY_NOTIFICATIONS","KEY_TOKEN","KEY_SETTINGS","KEY_ADDRESS","KEY_ADDRESSES","KEY_APPOINT_REQ","KEY_APPOINT_MYRATES","KEY_LOCALE","KEY_SETECT_ADDRESS","KEY_REVIEWED_PRODUCTS","KEY_SEARCH_HISTORY","REF_USERS","REF_CHAT","REF_INBOX","REF_USERS_FCM_IDS","SCOPE_ECOMMERCE","SCOPE_SPECIALIZATION","ROLE_USER","ROLE_VENDOR","ROLE_DELIVERY","Helper","phone","toReturn","replace","startsWith","sh","window","localStorage","setItem","adl","parse","getItem","addresses","settings","authRes","removeItem","token","sl","language","lc","location","settingKey","getSettings","s","key","value","notiTitle","notiBody","notiTime","notifications","millis","format","timestamp","MyNotification","title","detail","time","RatingSummary","i"],"mappings":"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","file":"default~add-address-add-address-module~contact-us-contact-us-module~home-home-module~my-profile-my-p~1f12d469-es5.js","sourcesContent":["import { Injectable, Inject } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { Country } from 'src/models/models-shop-hour/country.models';\nimport { AuthResponse } from 'src/models/models-shop-hour/auth-response.models';\nimport { SocialLoginRequest } from 'src/models/models-shop-hour/sociallogin-request.models';\nimport { SignUpRequest } from 'src/models/models-shop-hour/auth-signup-request.models';\nimport { MyMeta } from 'src/models/models-shop-hour/meta.models';\nimport { MyAddress } from 'src/models/models-shop-hour/address.models';\nimport { BaseListResponse } from 'src/models/models-shop-hour/base-list.models';\nimport { Helper } from 'src/models/models-shop-hour/helper.models';\nimport { Rating } from 'src/models/models-shop-hour/rating.models';\nimport { RatingSummary } from 'src/models/models-shop-hour/rating-summary.models';\nimport { PaymentMethod } from 'src/models/models-shop-hour/payment-method.models';\nimport { SupportRequest } from 'src/models/models-shop-hour/support-request.models';\nimport { User } from 'src/models/models-shop-hour/user.models';\nimport { RateRequest } from 'src/models/models-shop-hour/rate-request.models';\nimport { Category } from 'src/models/models-shop-hour/category.models';\nimport { Product } from 'src/models/models-shop-hour/product.models';\nimport { OrderRequest } from 'src/models/models-shop-hour/order-request.models';\nimport { Coupon } from 'src/models/models-shop-hour/coupon.models';\nimport { Order } from 'src/models/models-shop-hour/order.models';\nimport { APP_CONFIG_ShopHour, ShopHourConfig } from 'src/app/shophour.config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n  private myHeaders: HttpHeaders;\n\n  private currency_icon: string;\n  private locale: string;\n  private reviewedIds = new Array<string>();\n  private uuid: string = \"xxx\";\n  private platform: string = \"android\";\n\n  constructor(@Inject(APP_CONFIG_ShopHour) private config: ShopHourConfig, private http: HttpClient) { }\n\n  reloadSetting() {\n    this.currency_icon = Helper.getSetting(\"currency_icon\");\n    this.locale = Helper.getSetting(\"locale\");\n  }\n\n  reloadItemsReviewed() {\n    this.reviewedIds = Helper.getReviewedProductIds();\n  }\n\n  setupHeaders(authToken?: string) {\n    let tokenToUse = authToken ? authToken : Helper.getToken();\n    let savedLanguageCode = Helper.getLanguageDefault();\n    this.myHeaders = tokenToUse ? new HttpHeaders({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': ('Bearer ' + tokenToUse),\n      'X-Localization': String(savedLanguageCode ? savedLanguageCode : this.config.availableLanguages[0].code),\n      'X-Device-Id': this.uuid ? this.uuid : \"xxx\",\n      'X-Device-Type': this.platform ? this.platform : \"android\"\n    }) : new HttpHeaders({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'X-Localization': String(savedLanguageCode ? savedLanguageCode : this.config.availableLanguages[0].code),\n      'X-Device-Id': this.uuid ? this.uuid : \"xxx\",\n      'X-Device-Type': this.platform ? this.platform : \"android\"\n    });\n  }\n\n\n  setUuidAndPlatform(uuid: string, platform: string) {\n    this.uuid = uuid;\n    this.platform = platform ? String(platform).toLowerCase() : platform;\n    this.setupHeaders();\n  }\n\n  public getCountries(): Observable<Array<Country>> {\n    return this.http.get<Array<Country>>('./assets/json/countries.json').pipe(\n      tap(data => {\n        let indiaIndex = -1;\n        // if (data) {\n        //   for (let i = 0; i < data.length; i++) {\n        //     if (data[i].name == \"India\") {\n        //       indiaIndex = i;\n        //       break;\n        //     }\n        //   }\n        // }\n        if (indiaIndex != -1) data.unshift(data.splice(indiaIndex, 1)[0]);\n      }),\n      catchError(this.handleError<Array<Country>>('getCountries', []))\n    );\n  }\n\n  public getURL(url: string): Observable<any> {\n    return this.http.get<any>(url, { headers: this.myHeaders });\n  }\n\n  public getSettings(): Observable<Array<MyMeta>> {\n    return this.http.get<Array<MyMeta>>(this.config.apiBase + 'api/settings', { headers: this.myHeaders });\n  }\n\n  public submitSupport(supportRequest: SupportRequest): Observable<{}> {\n    return this.http.post<{}>(this.config.apiBase + \"api/support\", supportRequest, { headers: this.myHeaders });\n  }\n\n  public checkUser(checkUserRequest: any): Observable<{}> {\n    return this.http.post<{}>(this.config.apiBase + 'api/check-user', checkUserRequest, { headers: this.myHeaders });\n  }\n\n  public loginSocial(socialLoginRequest: SocialLoginRequest): Observable<AuthResponse> {\n    return this.http.post<AuthResponse>(this.config.apiBase + 'api/social/login', socialLoginRequest, { headers: this.myHeaders }).pipe(tap(data => this.setupUserMe(data)));\n  }\n\n  public loginUser(loginTokenRequest: { token: string, role: string }): Observable<AuthResponse> {\n    return this.http.post<AuthResponse>(this.config.apiBase + 'api/login', loginTokenRequest, { headers: this.myHeaders }).pipe(tap(data => this.setupUserMe(data)));\n  }\n\n  public createUser(signUpRequest: SignUpRequest): Observable<AuthResponse> {\n    return this.http.post<AuthResponse>(this.config.apiBase + 'api/register', signUpRequest, { headers: this.myHeaders }).pipe(tap(data => this.setupUserMe(data)));\n  }\n\n  public updateUser(updateRequest): Observable<User> {\n    return this.http.put<User>(this.config.apiBase + 'api/user', updateRequest, { headers: this.myHeaders }).pipe(tap(data => this.setupUserMe(data)));\n  }\n\n  public rateUser(uId: number, rateRequest: RateRequest): Observable<{}> {\n    return this.http.post<{}>(this.config.apiBase + \"api/user/ratings/\" + uId, JSON.stringify(rateRequest), { headers: this.myHeaders });\n  }\n\n  public getCategoriesParents(scope: string): Observable<Array<Category>> {\n    return this.http.get<Array<Category>>(this.config.apiBase + \"api/categories?pagination=0&parent=1&scope=\" + scope, { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.length) for (let cat of data) this.setupCategory(cat);\n    })\n      //, catchError(this.handleError<Array<Category>>('getCategoriesParents', this.getTestCategories()))\n    );\n  }\n\n  public getBanners(scope: string): Observable<Array<Category>> {\n    return this.http.get<Array<Category>>(this.config.apiBase + \"api/banners?pagination=0&parent=1&scope=\" + scope, { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.length) for (let cat of data) this.setupCategory(cat);\n    })\n      //, catchError(this.handleError<Array<Category>>('getCategoriesParents', this.getTestCategories()))\n    );\n  }\n\n  public getCategoriesSub(scope: string, parentId: number): Observable<Array<Category>> {\n    return this.http.get<Array<Category>>(this.config.apiBase + \"api/categories?pagination=0&category=\" + parentId + \"&scope=\" + scope, { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.length) for (let cat of data) this.setupCategory(cat);\n    })\n      //, catchError(this.handleError<Array<Category>>('getCategoriesSub', this.getTestCategories()))\n    );\n  }\n  public getProductsFavorite(): Observable<Array<Product>> {\n    return this.http.get<Array<Product>>(this.config.apiBase + \"api/products/favourites/list\", { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.length) for (let pro of data) this.setupProduct(pro);\n    })\n      //, catchError(this.handleError<BaseListResponse>('getProductsWithCategoryId', this.getTestProducts()))\n    );\n  }\n\n  public getProductsWithQuery(query: string, page: number): Observable<BaseListResponse> {\n    this.reloadSetting();\n    let urlParams = new URLSearchParams();\n    urlParams.append(\"search\", query);\n    urlParams.append(\"page\", String(page));\n    return this.http.get<BaseListResponse>(this.config.apiBase + \"api/products?\" + urlParams.toString(), { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.data && data.data.length) for (let pro of data.data) this.setupProduct(pro);\n    })\n      //, catchError(this.handleError<BaseListResponse>('getProductsWithCategoryId', this.getTestProducts()))\n    );\n  }\n\n  public getProductsWithCategoryId(scope: string, categoryId: number, type: string, page: number): Observable<BaseListResponse> {\n    this.reloadSetting();\n    let urlParams = new URLSearchParams();\n    urlParams.append(\"category\", String(categoryId));\n    urlParams.append(\"page\", String(page));\n    urlParams.append(\"scope\", scope);\n    if (type != null) urlParams.append(\"vendor_type\", type);\n    return this.http.get<BaseListResponse>(this.config.apiBase + \"api/products?\" + urlParams.toString(), { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.data && data.data.length) for (let pro of data.data) this.setupProduct(pro);\n    })\n      //, catchError(this.handleError<BaseListResponse>('getProductsWithCategoryId', this.getTestProducts()))\n    );\n  }\n\n  public getProductsWithVendorId(vendorId: number, page: number): Observable<BaseListResponse> {\n    this.reloadSetting();\n    return this.http.get<BaseListResponse>(this.config.apiBase + \"api/products?vendor=\" + vendorId + \"&page=\" + page, { headers: this.myHeaders }).pipe(tap(data => {\n      if (data && data.data && data.data.length) for (let pro of data.data) this.setupProduct(pro);\n    })\n      //, catchError(this.handleError<BaseListResponse>('getProductsWithCategoryId', this.getTestProducts()))\n    );\n  }\n\n  public getProductsWithId(productId): Observable<Product> {\n    this.reloadSetting();\n    return this.http.get<Product>(this.config.apiBase + \"api/products/\" + productId, { headers: this.myHeaders }).pipe(tap(data => {\n      this.setupProduct(data);\n    })\n      //, catchError(this.handleError<BaseListResponse>('getProductsWithCategoryId', this.getTestProducts()))\n    );\n  }\n\n  public toggleProductFavorite(productId): Observable<any> {\n    return this.http.post<any>(this.config.apiBase + \"api/products/favourites/\" + productId, {}, { headers: this.myHeaders });\n  }\n\n  public getPaymentMethods(): Observable<Array<PaymentMethod>> {\n    return this.http.get<Array<PaymentMethod>>(this.config.apiBase + 'api/payment/methods', { headers: this.myHeaders });\n  }\n\n  public getAddresses(): Observable<Array<MyAddress>> {\n    return this.http.get<Array<MyAddress>>(this.config.apiBase + 'api/addresses', { headers: this.myHeaders });\n  }\n\n  public addressAdd(address): Observable<MyAddress> {\n    return this.http.post<MyAddress>(this.config.apiBase + 'api/addresses', address, { headers: this.myHeaders });\n  }\n\n  public addressUpdate(address): Observable<MyAddress> {\n    return this.http.put<MyAddress>(this.config.apiBase + 'api/addresses/' + address.id + '/update', address, { headers: this.myHeaders });\n  }\n\n  public createOrder(orderRequest: OrderRequest): Observable<Order> {\n    return this.http.post<Order>(this.config.apiBase + 'api/orders', orderRequest, { headers: this.myHeaders });\n  }\n\n  public checkCoupon(couponCode: string): Observable<Coupon> {\n    return this.http.get<Coupon>(this.config.apiBase + 'api/coupons/check-validity?code=' + couponCode, { headers: this.myHeaders });\n  }\n\n  public getOrderById(orderId): Observable<Order> {\n    this.reloadSetting();\n    this.reloadItemsReviewed();\n    return this.http.get<Order>(this.config.apiBase + \"api/orders/\" + orderId, { headers: this.myHeaders }).pipe(tap(data => {\n      this.setupOrder(data);\n    }));\n  }\n\n  public getOrders(pageNo: number): Observable<BaseListResponse> {\n    this.reloadSetting();\n    this.reloadItemsReviewed();\n    return this.http.get<BaseListResponse>(this.config.apiBase + \"api/orders?page=\" + pageNo, { headers: this.myHeaders }).pipe(tap(data => {\n      for (let order of data.data) this.setupOrder(order);\n    }));\n  }\n\n  public getCoupons(): Observable<Array<Coupon>> {\n    return this.http.get<Array<Coupon>>(this.config.apiBase + \"api/coupons\", { headers: this.myHeaders });\n  }\n\n  public getRatingSummaryProduct(productId): Observable<Rating> {\n    return this.http.get<Rating>(this.config.apiBase + \"api/products/ratings/summary/\" + productId, { headers: this.myHeaders }).pipe(tap(data => {\n      let ratingSummaries = RatingSummary.defaultArray();\n      for (let ratingSummaryResult of data.summary) {\n        ratingSummaries[ratingSummaryResult.rounded_rating - 1].total = ratingSummaryResult.total;\n        ratingSummaries[ratingSummaryResult.rounded_rating - 1].percent = ((ratingSummaryResult.total / data.total_ratings) * 100);\n      }\n      data.summary = ratingSummaries;\n    }));\n  }\n\n  public getReviewsProduct(productId, pageNo: number): Observable<BaseListResponse> {\n    return this.http.get<BaseListResponse>(this.config.apiBase + \"api/products/ratings/\" + productId + \"?page=\" + pageNo, { headers: this.myHeaders }).pipe(tap(data => {\n      let locale = Helper.getLocale();\n      for (let review of data.data) review.created_at = Helper.formatTimestampDate(review.created_at, locale);\n    }));\n  }\n\n  public postReviewProduct(productId, rr: RateRequest): Observable<any> {\n    return this.http.post<any>(this.config.apiBase + \"api/products/ratings/\" + productId, rr, { headers: this.myHeaders });\n  }\n\n  private setupOrder(order: Order) {\n    order.created_at = Helper.formatTimestampDate(order.created_at, this.locale);\n    if (order.scheduled_on) order.scheduled_on = Helper.formatTimestampDate(order.scheduled_on, this.locale);\n\n    order.total_toshow = this.currency_icon + Number(order.total).toFixed(2);\n    order.subtotal_toshow = this.currency_icon + Number(order.subtotal).toFixed(2);\n    if (order.delivery_fee) order.delivery_fee_toshow = this.currency_icon + Number(order.delivery_fee).toFixed(2);\n    if (order.discount) order.discount_toshow = this.currency_icon + Number(order.discount).toFixed(2);\n    if (order.taxes) order.taxes_toshow = this.currency_icon + Number(order.taxes).toFixed(2);\n\n    for (let product of order.products) {\n      product.total_toshow = this.currency_icon + Number(product.total).toFixed(2);\n      if (product.vendor_product && product.vendor_product.product) {\n        if (!product.vendor_product.product.price) product.vendor_product.product.price = 0;\n        product.vendor_product.product.priceToShow = this.currency_icon + Number(product.vendor_product.product.price).toFixed(2);\n\n        product.vendor_product.product.images = new Array<string>();\n        if (product.vendor_product.product.mediaurls && product.vendor_product.product.mediaurls.images) for (let imgObj of product.vendor_product.product.mediaurls.images) if (imgObj[\"default\"]) product.vendor_product.product.images.push(imgObj[\"default\"]);\n        if (!product.vendor_product.product.images.length) product.vendor_product.product.images.push(\"assets/images/plc_item_image.png\");\n\n        //custom\n        product.vendor_product.product.reviewed = (this.reviewedIds != null && this.reviewedIds.includes(String(String(order.id) + String(product.vendor_product.product.id))));\n      }\n    }\n\n    if (order.vendor) {\n      if (!order.vendor.mediaurls || !order.vendor.mediaurls.images) order.vendor.mediaurls = { images: [] };\n      order.vendor.image = \"assets/images/plc_seller_profile.png\";\n      for (let imgObj of order.vendor.mediaurls.images) if (imgObj[\"default\"]) { order.vendor.image = imgObj[\"default\"]; break; }\n    }\n\n    if (order.delivery) {\n      order.delivery.delivery.user.image_url = \"assets/images/empty_dp\";\n      if (!order.delivery.delivery.user.mediaurls || !order.delivery.delivery.user.mediaurls.images) order.delivery.delivery.user.mediaurls = { images: [] };\n      for (let imgObj of order.delivery.delivery.user.mediaurls.images) if (imgObj[\"default\"]) { order.delivery.delivery.user.image_url = imgObj[\"default\"]; break; }\n    }\n  }\n\n  private setupCategory(category: Category) {\n    if (category.mediaurls && category.mediaurls.images) for (let imgObj of category.mediaurls.images) if (imgObj[\"default\"]) { category.image = imgObj[\"default\"]; break; }\n    if (!category.image) category.image = \"assets/images/plc_item_image.png\";\n  }\n\n  public setupProduct(product: Product) {\n    //product.prescription_required = (product.meta && product.meta.prescription);\n\n    if (!product.ratings) product.ratings = 0;\n    if (!product.ratings_count) product.ratings_count = 0;\n    if (!product.price) product.price = 0;\n    product.priceToShow = this.currency_icon + product.price.toFixed(2);\n    product.ratings = Number(product.ratings.toFixed(2));\n\n    product.vendorText = \"\";\n    if (product.vendor_products && product.vendor_products.length) {\n      for (let vp of product.vendor_products) {\n        if (!vp.sale_price) vp.sale_price = 0;\n        vp.priceToShow = this.currency_icon + vp.price.toFixed(2);\n        vp.sale_priceToShow = this.currency_icon + vp.sale_price.toFixed(2);\n\n        if (vp.vendor) {\n          if (!vp.vendor.mediaurls || !vp.vendor.mediaurls.images) vp.vendor.mediaurls = { images: [] };\n          vp.vendor.image = \"assets/images/plc_seller_profile.png\";\n          for (let imgObj of vp.vendor.mediaurls.images) if (imgObj[\"default\"]) { vp.vendor.image = imgObj[\"default\"]; break; }\n\n          product.vendorText += (vp.vendor.name + \", \");\n        }\n      }\n    }\n\n    if (product.vendorText.length) product.vendorText = product.vendorText.substring(0, product.vendorText.length - 2);\n\n    if (product.categories && product.categories.length) {\n      for (let cat of product.categories) this.setupCategory(cat);\n    }\n\n    product.images = new Array<string>();\n    if (product.mediaurls && product.mediaurls.images) for (let imgObj of product.mediaurls.images) if (imgObj[\"default\"]) product.images.push(imgObj[\"default\"]);\n    if (!product.images.length) product.images.push(\"assets/images/plc_item_image.png\");\n  }\n\n  private setupUserMe(data) {\n    if (!data.mediaurls || !data.mediaurls.images) data.mediaurls = { images: [] };\n    if (!data.image_url) for (let imgObj of data.mediaurls.images) if (imgObj[\"default\"]) { data.image_url = imgObj[\"default\"]; break; }\n  }\n\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      // TODO: send the error to remote logging infrastructure\n      console.error(error); // log to console instead\n      // TODO: better job of transforming error for user consumption\n      console.log(`${operation} failed: ${error.message}`);\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n\n}\n","export class Constants {\n    static KEY_DEFAULT_LANGUAGE = 'shophourc_dl';\n    static KEY_USER = 'shophourc_user';\n    static KEY_NOTIFICATIONS = 'shophourc_notis';\n    static KEY_TOKEN = 'shophourc_token';\n    static KEY_SETTINGS = 'shophourc_settings';\n    static KEY_ADDRESS = 'shophourc_address';\n    static KEY_ADDRESSES = 'shophourc_addresses';\n    static KEY_APPOINT_REQ = 'shophourc_appoint_req';\n    static KEY_APPOINT_MYRATES = 'shophourc_appoint_myrates';\n    static KEY_LOCALE = \"shophourc_locale\";\n    static KEY_SETECT_ADDRESS = 'shophourc_setect_address';\n    static KEY_REVIEWED_PRODUCTS = 'shophourc_reviewed_products';\n    static KEY_SEARCH_HISTORY = 'shophourc_search_history';\n\n    static REF_USERS = \"fire_app/users\";\n    static REF_CHAT = \"fire_app/chats\";\n    static REF_INBOX = \"fire_app/inbox\";\n    static REF_USERS_FCM_IDS = \"fire_app/user_fcm_ids\";\n\n    static SCOPE_ECOMMERCE = \"ecommerce\";\n    static SCOPE_SPECIALIZATION = \"specializations\";\n\n    static ROLE_USER = \"customer\";\n    static ROLE_VENDOR = \"vendor\";\n    static ROLE_DELIVERY = \"delivery\";\n}\n","import { Constants } from './constants.models';\nimport { MyNotification } from './notification.models';\nimport { AuthResponse } from './auth-response.models';\nimport { MyMeta } from './meta.models';\nimport { MyAddress } from './address.models';\nimport { User } from './user.models';\nimport * as moment from 'moment';\n\nexport class Helper {\n    static formatPhone(phone: string): string {\n        let toReturn = phone.replace(/\\s/g, '');\n        while (toReturn.startsWith(\"0\")) toReturn = toReturn.substring(1);\n        return toReturn;\n    }\n    static setSearchHistory(sh: Array<string>) {\n        window.localStorage.setItem(Constants.KEY_SEARCH_HISTORY, JSON.stringify(sh));\n    }\n    static getSearchHistory(): Array<string> {\n        let adl: Array<string> = JSON.parse(window.localStorage.getItem(Constants.KEY_SEARCH_HISTORY));\n        return (adl && adl.length) ? adl : new Array<string>();\n    }\n    static getReviewedProductIds(): Array<string> {\n        let adl: Array<string> = JSON.parse(window.localStorage.getItem(Constants.KEY_REVIEWED_PRODUCTS));\n        return (adl && adl.length) ? adl : new Array<string>();\n    }\n    static addReviewedProductId(id: string) {\n        let adl: Array<string> = this.getReviewedProductIds();\n        adl.push(id);\n        window.localStorage.setItem(Constants.KEY_REVIEWED_PRODUCTS, JSON.stringify(adl));\n    }\n    static setAddresses(addresses: Array<MyAddress>) {\n        window.localStorage.setItem(Constants.KEY_ADDRESSES, JSON.stringify(addresses));\n    }\n    static getAddresses(): Array<MyAddress> {\n        let adl: Array<MyAddress> = JSON.parse(window.localStorage.getItem(Constants.KEY_ADDRESSES));\n        return (adl && adl.length) ? adl : new Array<MyAddress>();\n    }\n    static setSettings(settings: Array<MyMeta>) {\n        window.localStorage.setItem(Constants.KEY_SETTINGS, JSON.stringify(settings));\n    }\n    static getSettings(): Array<MyMeta> {\n        return JSON.parse(window.localStorage.getItem(Constants.KEY_SETTINGS));\n    }\n    static setLoggedInUser(user: User) {\n        window.localStorage.setItem(Constants.KEY_USER, JSON.stringify(user));\n    }\n    static setLoggedInUserResponse(authRes: AuthResponse) {\n        window.localStorage.removeItem(Constants.KEY_USER);\n        window.localStorage.removeItem(Constants.KEY_TOKEN);\n        window.localStorage.removeItem(Constants.KEY_ADDRESS);\n        window.localStorage.removeItem(Constants.KEY_ADDRESSES);\n        window.localStorage.removeItem(Constants.KEY_NOTIFICATIONS);\n\n        if (authRes && authRes.user && authRes.token) {\n            window.localStorage.setItem(Constants.KEY_USER, JSON.stringify(authRes.user));\n            window.localStorage.setItem(Constants.KEY_TOKEN, authRes.token);\n        }\n    }\n    static getToken() {\n        return window.localStorage.getItem(Constants.KEY_TOKEN);\n    }\n    static getLoggedInUser(): User {\n        return JSON.parse(window.localStorage.getItem(Constants.KEY_USER));\n    }\n    static getAddressSelected(): MyAddress {\n        return JSON.parse(window.localStorage.getItem(Constants.KEY_ADDRESS));\n    }\n    static getSetectedAddress(): MyAddress {\n        return JSON.parse(window.localStorage.getItem(Constants.KEY_SETECT_ADDRESS));\n    }\n    static getLocale(): string {\n        let sl = window.localStorage.getItem(Constants.KEY_LOCALE);\n        return sl && sl.length ? sl : \"en\";\n    }\n    static getLanguageDefault(): string {\n        return window.localStorage.getItem(Constants.KEY_DEFAULT_LANGUAGE);\n    }\n    static setLanguageDefault(language: string) {\n        window.localStorage.setItem(Constants.KEY_DEFAULT_LANGUAGE, language);\n    }\n    static setLocale(lc) {\n        window.localStorage.setItem(Constants.KEY_LOCALE, lc);\n    }\n    static setAddressSelected(location: MyAddress) {\n        window.localStorage.setItem(Constants.KEY_ADDRESS, JSON.stringify(location));\n    }\n    static getSetting(settingKey: string) {\n        let settings: Array<MyMeta> = this.getSettings();\n        let toReturn: string;\n        if (settings) {\n            for (let s of settings) {\n                if (s.key == settingKey) {\n                    toReturn = s.value;\n                    break;\n                }\n            }\n        }\n        if (!toReturn) toReturn = \"\";\n        return toReturn;\n    }\n    static saveNotification(notiTitle: string, notiBody: string, notiTime: string) {\n        let notifications: Array<MyNotification> = JSON.parse(window.localStorage.getItem(Constants.KEY_NOTIFICATIONS));\n        if (!notifications) notifications = new Array<MyNotification>();\n        notifications.push(new MyNotification(notiTitle, notiBody, notiTime));\n        window.localStorage.setItem(Constants.KEY_NOTIFICATIONS, JSON.stringify(notifications));\n    }\n    static formatMillisDateTime(millis: number, locale: string): string {\n        return moment(millis).locale(locale).format(\"ddd, MMM D, HH:mm\");\n    }\n    static formatTimestampDateTime(timestamp: string, locale: string): string {\n        return moment(timestamp).locale(locale).format(\"ddd, MMM D, HH:mm\");\n    }\n    static formatMillisDate(millis: number, locale: string): string {\n        return moment(millis).locale(locale).format(\"Do MMM YYYY\");\n    }\n    static formatTimestampDate(timestamp: string, locale: string): string {\n        return moment(timestamp).locale(locale).format(\"Do MMM YYYY\");\n    }\n    static formatMillisTime(millis: number, locale: string): string {\n        return moment(millis).locale(locale).format(\"HH:mm\");\n    }\n    static formatTimestampTime(timestamp: string, locale: string): string {\n        return moment(timestamp).locale(locale).format(\"HH:mm\");\n    }\n}","export class MyNotification {\n    title: string;\n    detail: string;\n    time: string;\n    colorclass: string;\n\n    constructor(title: string, detail: string, time: string) {\n        this.title = title;\n        this.detail = detail;\n        this.time = time;\n    }\n}","export class RatingSummary {\n    total: number;\n    percent: number;\n    rounded_rating: number;\n\n    constructor(total: number, percent: number, rounded_rating: number) {\n        this.total = total;\n        this.percent = percent;\n        this.rounded_rating = rounded_rating;\n    }\n\n    static defaultArray(): Array<RatingSummary> {\n        let ratingSummaries = new Array<RatingSummary>();\n        for (let i = 0; i < 5; i++) {\n            ratingSummaries.push(new RatingSummary(0, 0, i));\n        }\n        return ratingSummaries;\n    }\n}"]}