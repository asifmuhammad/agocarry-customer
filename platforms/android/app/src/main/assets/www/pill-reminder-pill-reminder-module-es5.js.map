{"version":3,"sources":["webpack:///src/app/pill-reminder/pill-reminder.page.html","webpack:///src/app/pill-reminder/pill-reminder-routing.module.ts","webpack:///src/app/pill-reminder/pill-reminder.module.ts","webpack:///src/app/pill-reminder/pill-reminder.page.scss","webpack:///src/app/pill-reminder/pill-reminder.page.ts","webpack:///src/models/reminder.models.ts"],"names":["routes","path","component","PillReminderPageRoutingModule","imports","forChild","exports","PillReminderPageModule","providers","declarations","PillReminderPage","navCtrl","translate","localNotifications","uiElementService","alertCtrl","pillTitle","momentStart","pillTimes","dateIso","format","dateValue","lastNotiID","getLastReminderID","index","momentNew","push","splice","length","get","subscribe","value","presentToast","pillDay","values","create","header","message","buttons","text","handler","pop","scheduleNotifications","then","alert","present","myReminder","title","body","subTitle","time_pill","instant","times","Array","time","includes","dayNum","schedule","id","Number","trigger","every","weekday","hour","minute","count","notificationIds","substring","saveReminder","setLastReminderID","selector","template","Reminder"],"mappings":"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","file":"pill-reminder-pill-reminder-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>{{'create_pill_remibder' | translate}}</ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen>\\r\\n    <div class=\\\"form\\\">\\r\\n        <ion-list lines=\\\"none\\\">\\r\\n            <ion-card>\\r\\n                <h2>{{'pill_name' | translate}}</h2>\\r\\n                <ion-item lines=\\\"none\\\">\\r\\n                    <ion-input class=\\\"ion-text-start\\\" placeholder=\\\"{{'pill_name' | translate}}\\\" [(ngModel)]=\\\"pillTitle\\\">\\r\\n                    </ion-input>\\r\\n                </ion-item>\\r\\n            </ion-card>\\r\\n\\r\\n            <ion-card>\\r\\n                <h2>{{'select_days' | translate}}</h2>\\r\\n                <ion-item lines=\\\"none\\\">\\r\\n                    <div class=\\\"item_inner d-flex\\\">\\r\\n                        <ion-icon class=\\\"zmdi zmdi-calendar-alt ion-text-start\\\"></ion-icon>\\r\\n                        <ion-label mode=\\\"md\\\" position=\\\"fixed\\\">{{\\\"select_days\\\" | translate}}</ion-label>\\r\\n                        <ion-select mode=\\\"md\\\" placeholder=\\\"{{'select_days' | translate}}\\\" [(ngModel)]=\\\"pillDay\\\"\\r\\n                            multiple=\\\"false\\\" [okText]=\\\"'okay' | translate\\\" [cancelText]=\\\"'cancel' | translate\\\">\\r\\n                            <ion-select-option value=\\\"mon\\\">{{'mon' | translate}}</ion-select-option>\\r\\n                            <ion-select-option value=\\\"tue\\\">{{'tue' | translate}}</ion-select-option>\\r\\n                            <ion-select-option value=\\\"wed\\\">{{'wed' | translate}}</ion-select-option>\\r\\n                            <ion-select-option value=\\\"thu\\\">{{'thu' | translate}}</ion-select-option>\\r\\n                            <ion-select-option value=\\\"fri\\\">{{'fri' | translate}}</ion-select-option>\\r\\n                            <ion-select-option value=\\\"sat\\\">{{'sat' | translate}}</ion-select-option>\\r\\n                            <ion-select-option value=\\\"sun\\\">{{'sun' | translate}}</ion-select-option>\\r\\n                        </ion-select>\\r\\n                    </div>\\r\\n                </ion-item>\\r\\n            </ion-card>\\r\\n\\r\\n            <ion-card>\\r\\n                <h2>{{'select_time' | translate}}</h2>\\r\\n                <div class=\\\"item_box d-flex\\\" *ngFor=\\\"let pillTime of pillTimes;let i = index\\\" lines=\\\"none\\\">\\r\\n                    <ion-item>\\r\\n                        <div class=\\\"item_inner d-flex\\\">\\r\\n                            <ion-icon class=\\\"zmdi zmdi-notifications ion-text-start\\\"></ion-icon>\\r\\n                            <ion-datetime mode=\\\"ios\\\" displayFormat=\\\"HH:mm\\\" [value]=\\\"pillTime.dateValue\\\"\\r\\n                                [(ngModel)]=\\\"pillTime.dateIso\\\">\\r\\n                            </ion-datetime>\\r\\n                        </div>\\r\\n                    </ion-item>\\r\\n                    <div class=\\\"add_time_box end\\\" (click)=\\\"addRemoveTime(i)\\\">\\r\\n                        <span *ngIf=\\\"i == 0\\\">+</span>\\r\\n                        <span *ngIf=\\\"i != 0\\\">-</span>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <!-- <div class=\\\"add_time_box end\\\" (click)=\\\"addTime()\\\">\\r\\n                        <span>+</span>\\r\\n                    </div> -->\\r\\n            </ion-card>\\r\\n        </ion-list>\\r\\n    </div>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-no-border\\\">\\r\\n    <ion-button size=\\\"large\\\" shape=\\\"full\\\" class=\\\"btn\\\" (click)=\\\"confirmReminder()\\\">\\r\\n        {{'set_reminder' | translate}}\\r\\n    </ion-button>\\r\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PillReminderPage } from './pill-reminder.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PillReminderPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PillReminderPageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PillReminderPageRoutingModule } from './pill-reminder-routing.module';\r\n\r\nimport { PillReminderPage } from './pill-reminder.page';\r\n\r\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    PillReminderPageRoutingModule\r\n  ],\r\n  providers:[LocalNotifications],\r\n  declarations: [PillReminderPage]\r\n})\r\nexport class PillReminderPageModule { }\r\n","export default \"ion-header {\\n  box-shadow: 0 -7px 10px 10px rgba(0, 0, 0, 0.1);\\n}\\n\\n.form ion-list ion-card {\\n  border-radius: 0;\\n  box-shadow: none;\\n  margin: 0;\\n  width: 100%;\\n  padding-top: 30px;\\n}\\n\\n.form ion-list ion-card h2 {\\n  margin: 0;\\n  color: #000;\\n  font-size: 1rem;\\n  padding-bottom: 23px;\\n  font-weight: 500;\\n}\\n\\n.form ion-list ion-card ion-item {\\n  margin-bottom: 8px;\\n  border-radius: 4px;\\n  --min-height: unset !important;\\n}\\n\\n.form ion-list ion-card ion-item ion-input {\\n  --padding-top: 10px !important;\\n  --padding-bottom: 10px !important;\\n  font-size: 1rem !important;\\n}\\n\\n.form ion-list ion-card ion-item ion-label {\\n  display: none;\\n}\\n\\n.form ion-list ion-card ion-item .item_inner ion-icon {\\n  color: var(--primary);\\n  font-size: 1.3rem;\\n  min-width: 30px;\\n}\\n\\n.form ion-list ion-card ion-item.item-select ion-select {\\n  padding-top: 10px !important;\\n  padding-bottom: 10px !important;\\n  font-size: 1rem !important;\\n}\\n\\n.form ion-list ion-card ion-item.item-datetime ion-datetime {\\n  padding-top: 10px !important;\\n  padding-bottom: 10px !important;\\n  font-size: 1rem !important;\\n}\\n\\n.form ion-list ion-card .item_box {\\n  width: 100%;\\n  margin-bottom: 10px;\\n}\\n\\n.form ion-list ion-card .item_box ion-item {\\n  margin-bottom: 0;\\n  margin-right: 10px;\\n}\\n\\n.form ion-list ion-card .item_box .add_time_box {\\n  min-width: 44px;\\n  height: 44px;\\n  border-radius: 4px;\\n  text-align: center;\\n  line-height: 44px;\\n  position: relative;\\n  overflow: hidden;\\n  color: var(--primary);\\n  font-size: 2rem;\\n  font-weight: 500;\\n}\\n\\n.form ion-list ion-card .item_box .add_time_box::before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  background: var(--primary);\\n  opacity: 0.2;\\n}\\n\\n.form ion-list ion-card .item_box .add_time_box span {\\n  position: relative;\\n  z-index: 99;\\n  top: -3px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGlsbC1yZW1pbmRlci9GOlxcZml2ZXJcXEJlcm5hcmRcXEFnb2NhcnJ5XFxhZ29jYXJyeS1jdXN0b21lci9zcmNcXGFwcFxccGlsbC1yZW1pbmRlclxccGlsbC1yZW1pbmRlci5wYWdlLnNjc3MiLCJzcmMvYXBwL3BpbGwtcmVtaW5kZXIvcGlsbC1yZW1pbmRlci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwrQ0FBQTtBQ0NKOztBRElRO0VBQ0ksZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLFNBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7QUNEWjs7QURHWTtFQUNJLFNBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUNBLG9CQUFBO0VBQ0EsZ0JBQUE7QUNEaEI7O0FESVk7RUFDSSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsOEJBQUE7QUNGaEI7O0FESWdCO0VBQ0ksOEJBQUE7RUFDQSxpQ0FBQTtFQUNBLDBCQUFBO0FDRnBCOztBREtnQjtFQUNJLGFBQUE7QUNIcEI7O0FET29CO0VBQ0kscUJBQUE7RUFDQSxpQkFBQTtFQUNBLGVBQUE7QUNMeEI7O0FEU2dCO0VBQ0ksNEJBQUE7RUFDQSwrQkFBQTtFQUNBLDBCQUFBO0FDUHBCOztBRFVnQjtFQUNJLDRCQUFBO0VBQ0EsK0JBQUE7RUFDQSwwQkFBQTtBQ1JwQjs7QURZWTtFQUNJLFdBQUE7RUFDQSxtQkFBQTtBQ1ZoQjs7QURZZ0I7RUFDSSxnQkFBQTtFQUNBLGtCQUFBO0FDVnBCOztBRGFnQjtFQUNJLGVBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLHFCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FDWHBCOztBRGFvQjtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSwwQkFBQTtFQUNBLFlBQUE7QUNYeEI7O0FEY29CO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0EsU0FBQTtBQ1p4QiIsImZpbGUiOiJzcmMvYXBwL3BpbGwtcmVtaW5kZXIvcGlsbC1yZW1pbmRlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taGVhZGVyIHtcclxuICAgIGJveC1zaGFkb3c6IDAgLTdweCAxMHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG59XHJcblxyXG4uZm9ybSB7XHJcbiAgICBpb24tbGlzdCB7XHJcbiAgICAgICAgaW9uLWNhcmQge1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xyXG4gICAgICAgICAgICBib3gtc2hhZG93OiBub25lO1xyXG4gICAgICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMzBweDtcclxuXHJcbiAgICAgICAgICAgIGgyIHtcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiAjMDAwO1xyXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDIzcHg7XHJcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpb24taXRlbSB7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICAtLW1pbi1oZWlnaHQ6IHVuc2V0ICFpbXBvcnRhbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaW9uLWlucHV0IHtcclxuICAgICAgICAgICAgICAgICAgICAtLXBhZGRpbmctdG9wOiAxMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLS1wYWRkaW5nLWJvdHRvbTogMTBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlvbi1sYWJlbCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAuaXRlbV9pbm5lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDMwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICYuaXRlbS1zZWxlY3QgaW9uLXNlbGVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDEwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICYuaXRlbS1kYXRldGltZSBpb24tZGF0ZXRpbWUge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDFyZW0gIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLml0ZW1fYm94IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuXHJcbiAgICAgICAgICAgICAgICBpb24taXRlbSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLmFkZF90aW1lX2JveCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiA0NHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDRweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA0NHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDJyZW07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJjo6YmVmb3JlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzcGFuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAtM3B4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpb24taGVhZGVyIHtcbiAgYm94LXNoYWRvdzogMCAtN3B4IDEwcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG59XG5cbi5mb3JtIGlvbi1saXN0IGlvbi1jYXJkIHtcbiAgYm9yZGVyLXJhZGl1czogMDtcbiAgYm94LXNoYWRvdzogbm9uZTtcbiAgbWFyZ2luOiAwO1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZy10b3A6IDMwcHg7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCBoMiB7XG4gIG1hcmdpbjogMDtcbiAgY29sb3I6ICMwMDA7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgcGFkZGluZy1ib3R0b206IDIzcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCBpb24taXRlbSB7XG4gIG1hcmdpbi1ib3R0b206IDhweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAtLW1pbi1oZWlnaHQ6IHVuc2V0ICFpbXBvcnRhbnQ7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCBpb24taXRlbSBpb24taW5wdXQge1xuICAtLXBhZGRpbmctdG9wOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIC0tcGFkZGluZy1ib3R0b206IDEwcHggIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxcmVtICFpbXBvcnRhbnQ7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCBpb24taXRlbSBpb24tbGFiZWwge1xuICBkaXNwbGF5OiBub25lO1xufVxuLmZvcm0gaW9uLWxpc3QgaW9uLWNhcmQgaW9uLWl0ZW0gLml0ZW1faW5uZXIgaW9uLWljb24ge1xuICBjb2xvcjogdmFyKC0tcHJpbWFyeSk7XG4gIGZvbnQtc2l6ZTogMS4zcmVtO1xuICBtaW4td2lkdGg6IDMwcHg7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCBpb24taXRlbS5pdGVtLXNlbGVjdCBpb24tc2VsZWN0IHtcbiAgcGFkZGluZy10b3A6IDEwcHggIWltcG9ydGFudDtcbiAgcGFkZGluZy1ib3R0b206IDEwcHggIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxcmVtICFpbXBvcnRhbnQ7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCBpb24taXRlbS5pdGVtLWRhdGV0aW1lIGlvbi1kYXRldGltZSB7XG4gIHBhZGRpbmctdG9wOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIHBhZGRpbmctYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7XG4gIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xufVxuLmZvcm0gaW9uLWxpc3QgaW9uLWNhcmQgLml0ZW1fYm94IHtcbiAgd2lkdGg6IDEwMCU7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCAuaXRlbV9ib3ggaW9uLWl0ZW0ge1xuICBtYXJnaW4tYm90dG9tOiAwO1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCAuaXRlbV9ib3ggLmFkZF90aW1lX2JveCB7XG4gIG1pbi13aWR0aDogNDRweDtcbiAgaGVpZ2h0OiA0NHB4O1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbGluZS1oZWlnaHQ6IDQ0cHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgY29sb3I6IHZhcigtLXByaW1hcnkpO1xuICBmb250LXNpemU6IDJyZW07XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCAuaXRlbV9ib3ggLmFkZF90aW1lX2JveDo6YmVmb3JlIHtcbiAgY29udGVudDogXCJcIjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpO1xuICBvcGFjaXR5OiAwLjI7XG59XG4uZm9ybSBpb24tbGlzdCBpb24tY2FyZCAuaXRlbV9ib3ggLmFkZF90aW1lX2JveCBzcGFuIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiA5OTtcbiAgdG9wOiAtM3B4O1xufSJdfQ== */\";","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { NavController, AlertController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { UiElementsService } from '../services/common/ui-elements.service';\r\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\r\nimport * as moment from 'moment';\r\nimport { Helper } from 'src/models/helper.models';\r\nimport { Reminder } from 'src/models/reminder.models';\r\n\r\n@Component({\r\n  selector: 'app-pill-reminder',\r\n  templateUrl: './pill-reminder.page.html',\r\n  styleUrls: ['./pill-reminder.page.scss']\r\n})\r\nexport class PillReminderPage implements OnInit, OnDestroy {\r\n  pillTitle: string;\r\n  pillDay: string;\r\n  pillTimes: Array<{ dateIso: string; dateValue: string; }>;\r\n  private lastNotiID: number;\r\n\r\n  constructor(private navCtrl: NavController, private translate: TranslateService, private localNotifications: LocalNotifications,\r\n    private uiElementService: UiElementsService, private alertCtrl: AlertController) {\r\n    this.pillTitle = \"\";\r\n    //this.pillDays = new Array<string>();\r\n    let momentStart = moment();\r\n    this.pillTimes = [{ dateIso: momentStart.format(), dateValue: momentStart.format(\"HH:mm\") }];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.lastNotiID = Helper.getLastReminderID();\r\n    if (this.lastNotiID == null) this.lastNotiID = 0;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // for (let sub of this.subscriptions) sub.unsubscribe();\r\n    // this.uiElementService.dismissLoading();\r\n  }\r\n\r\n  addRemoveTime(index) {\r\n    if (index == 0) {\r\n      let momentNew = moment();\r\n      this.pillTimes.push({ dateIso: momentNew.format(), dateValue: momentNew.format(\"HH:mm\") });\r\n    } else {\r\n      this.pillTimes.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  confirmReminder() {\r\n    if (!this.pillTitle || !this.pillTitle.length) {\r\n      this.translate.get(\"err_field_pill_name\").subscribe(value => this.uiElementService.presentToast(value));\r\n    } else if (!this.pillDay || !this.pillDay.length) {\r\n      this.translate.get(\"err_field_pill_days\").subscribe(value => this.uiElementService.presentToast(value));\r\n    } else {\r\n      this.translate.get([\"pill_reminder\", \"pill_reminder_confirm\", \"no\", \"yes\"]).subscribe(values => {\r\n        this.alertCtrl.create({\r\n          header: values[\"pill_reminder\"],\r\n          message: values[\"pill_reminder_confirm\"],\r\n          buttons: [{\r\n            text: values[\"no\"],\r\n            handler: () => {\r\n              this.navCtrl.pop();\r\n            }\r\n          }, {\r\n            text: values[\"yes\"],\r\n            handler: () => {\r\n              this.scheduleNotifications();\r\n            }\r\n          }]\r\n        }).then(alert => alert.present());\r\n      });\r\n    }\r\n  }\r\n\r\n  scheduleNotifications() {\r\n    let myReminder = new Reminder();\r\n    myReminder.title = this.pillTitle;\r\n    myReminder.body = \"\";\r\n    myReminder.subTitle = \"\";\r\n    let time_pill = this.translate.instant(\"time_pill\");\r\n    let times = new Array<string>();\r\n    for (let time of this.pillTimes) if (!times.includes(time.dateIso)) { times.push(time.dateIso); myReminder.body += (moment(time.dateIso).format(\"HH:mm\") + \", \"); }\r\n\r\n    // for (let weekDay of this.pillDays) {\r\n    //   let dayNum = 0; //0 = sunday\r\n    //   switch (weekDay) {\r\n    //     case \"sun\":\r\n    //       myReminder.subTitle += \"Sun, \";\r\n    //       dayNum = 0;\r\n    //       break;\r\n    //     case \"mon\":\r\n    //       myReminder.subTitle += \"Mon, \";\r\n    //       dayNum = 1;\r\n    //       break;\r\n    //     case \"tue\":\r\n    //       myReminder.subTitle += \"Tue, \";\r\n    //       dayNum = 2;\r\n    //       break;\r\n    //     case \"wed\":\r\n    //       myReminder.subTitle += \"Wed, \";\r\n    //       dayNum = 3;\r\n    //       break;\r\n    //     case \"thu\":\r\n    //       myReminder.subTitle += \"Thu, \";\r\n    //       dayNum = 4;\r\n    //       break;\r\n    //     case \"fri\":\r\n    //       myReminder.subTitle += \"Fri, \";\r\n    //       dayNum = 5;\r\n    //       break;\r\n    //     case \"sat\":\r\n    //       myReminder.subTitle += \"Sat, \";\r\n    //       dayNum = 6;\r\n    //       break;\r\n    //   }\r\n\r\n    //   let notifications = [];\r\n    //   for (let time of times) {\r\n    //     this.lastNotiID += 1;\r\n    //     notifications.push({\r\n    //       id: Number(0 + this.lastNotiID),\r\n    //       title: this.pillTitle,\r\n    //       text: time_pill,\r\n    //       trigger: { every: { weekday: dayNum, hour: Number(moment(time).format(\"HH\")), minute: Number(moment(time).format(\"mm\")) } }\r\n    //     });\r\n    //     myReminder.notificationIds.push(Number(0 + this.lastNotiID));\r\n    //   }\r\n    //   this.localNotifications.schedule(notifications);\r\n    // }\r\n\r\n    let dayNum = 0; //0 = sunday\r\n    switch (this.pillDay) {\r\n      case \"sun\":\r\n        myReminder.subTitle += \"Sun, \";\r\n        dayNum = 0;\r\n        break;\r\n      case \"mon\":\r\n        myReminder.subTitle += \"Mon, \";\r\n        dayNum = 1;\r\n        break;\r\n      case \"tue\":\r\n        myReminder.subTitle += \"Tue, \";\r\n        dayNum = 2;\r\n        break;\r\n      case \"wed\":\r\n        myReminder.subTitle += \"Wed, \";\r\n        dayNum = 3;\r\n        break;\r\n      case \"thu\":\r\n        myReminder.subTitle += \"Thu, \";\r\n        dayNum = 4;\r\n        break;\r\n      case \"fri\":\r\n        myReminder.subTitle += \"Fri, \";\r\n        dayNum = 5;\r\n        break;\r\n      case \"sat\":\r\n        myReminder.subTitle += \"Sat, \";\r\n        dayNum = 6;\r\n        break;\r\n    }\r\n\r\n    for (let time of times) {\r\n      this.lastNotiID += 1;\r\n      this.localNotifications.schedule({\r\n        id: Number(0 + this.lastNotiID),\r\n        title: this.pillTitle,\r\n        text: time_pill,\r\n        trigger: {\r\n          every: { weekday: dayNum, hour: Number(moment(time).format(\"HH\")), minute: Number(moment(time).format(\"mm\")) },\r\n          count: 1\r\n        }\r\n      });\r\n      myReminder.notificationIds.push(Number(0 + this.lastNotiID));\r\n    }\r\n    myReminder.subTitle = myReminder.subTitle.substring(0, myReminder.subTitle.length - 2);\r\n    myReminder.body = myReminder.body.substring(0, myReminder.body.length - 2);\r\n    Helper.saveReminder(myReminder);\r\n    Helper.setLastReminderID(this.lastNotiID);\r\n    this.translate.get(\"reminder_added\").subscribe(value => this.uiElementService.presentToast(value));\r\n    this.navCtrl.pop();\r\n  }\r\n\r\n}\r\n","export class Reminder {\r\n    notificationIds: Array<number>;\r\n    title: string;\r\n    subTitle: string;\r\n    body: string;\r\n    time: number;\r\n    timeString: string;\r\n    \r\n    constructor() {\r\n        this.notificationIds = new Array<number>();\r\n    }\r\n}"]}