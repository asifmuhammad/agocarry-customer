{"version":3,"sources":["webpack:///src/app/register/register.page.html","webpack:///src/app/register/register-routing.module.ts","webpack:///src/app/register/register.module.ts","webpack:///src/app/register/register.page.scss","webpack:///src/app/register/register.page.ts","webpack:///src/models/auth-signup-request.models.ts"],"names":["routes","path","component","RegisterPageRoutingModule","imports","forChild","exports","RegisterPageModule","declarations","RegisterPage","navCtrl","uiElementService","apiService","apiServiceShophour","route","translate","alertCtrl","signUpRequest","changeHint","queryParams","subscribe","params","code","phone","name","email","length","countryCode","phoneNumber","getCountries","res","countries","clearPhoneSkip","country","callingCodes","countryCodeCountryText","get","value","phoneNumberHint","reg","presentToast","test","alertPhone","text","phoneNumberFull","formatPhone","create","header","message","buttons","role","handler","console","log","password","String","Math","floor","random","mobile_number","signUp","then","alert","present","presentLoading","createUser","resShophour","dismissLoading","navigationExtras","user","navigateForward","err","errMsg","error","errors","presentErrorAlert","pop","selector","template","SignUpRequest","ROLE_USER"],"mappings":"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","file":"register-register-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>{{'register_now' | translate}}</ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen>\\r\\n    <div class=\\\"form\\\">\\r\\n        <p class=\\\"ion-text-center\\\">{{'register_now_message' | translate}} <br>{{'register_now_message2' | translate}}\\r\\n        </p>\\r\\n\\r\\n        <ion-list lines=\\\"none\\\">\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <div class=\\\"ite_inner d-flex\\\">\\r\\n                    <ion-icon class=\\\"zmdi zmdi-globe-alt ion-text-start\\\"></ion-icon>\\r\\n                    <ion-label mode=\\\"md\\\" position=\\\"fixed\\\">{{\\\"select_country\\\" | translate}}</ion-label>\\r\\n                    <ion-select mode=\\\"md\\\" [(ngModel)]=\\\"countryCode\\\" multiple=\\\"false\\\" [value]=\\\"countryCode\\\"\\r\\n\\t\\t\\t\\t\\tplaceholder=\\\"{{'select_country' | translate}}\\\" [okText]=\\\"'okay' | translate\\\"\\r\\n\\t\\t\\t\\t\\t[cancelText]=\\\"'cancel' | translate\\\" (ionChange)=\\\"changeHint()\\\"\\r\\n\\t\\t\\t\\t\\t[selectedText]=\\\"countryCodeCountryText\\\">\\r\\n                        <ion-select-option *ngFor=\\\"let country of countries\\\" [value]=\\\"country.callingCodes[0]\\\">\\r\\n                            {{country.name}}\\r\\n                        </ion-select-option>\\r\\n                    </ion-select>\\r\\n                </div>\\r\\n            </ion-item>\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <div class=\\\"ite_inner d-flex\\\">\\r\\n                    <ion-icon class=\\\"zmdi  zmdi-smartphone-iphone ion-text-start\\\"></ion-icon>\\r\\n<!--                    <ion-label position=\\\"fixed\\\">{{phoneNumberHint}}</ion-label>-->\\r\\n                    <ion-input type=\\\"tel\\\" [(ngModel)]=\\\"phoneNumber\\\" placeholder=\\\"{{phoneNumberHint}}\\\"></ion-input>\\r\\n                </div>\\r\\n            </ion-item>\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <div class=\\\"ite_inner d-flex\\\">\\r\\n                    <ion-icon class=\\\"zmdi zmdi-account ion-text-start\\\"></ion-icon>\\r\\n                    <!--                    <ion-label position=\\\"fixed\\\">{{'user_name' | translate}}</ion-label>-->\\r\\n                    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"signUpRequest.name\\\" placeholder=\\\"{{'user_name' | translate}}\\\"></ion-input>\\r\\n                </div>\\r\\n            </ion-item>\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <div class=\\\"ite_inner d-flex\\\">\\r\\n                    <ion-icon class=\\\"zmdi zmdi-email ion-text-start\\\"></ion-icon>\\r\\n                    <!--                    <ion-label position=\\\"fixed\\\">{{'email_address' | translate}}</ion-label>-->\\r\\n                    <ion-input type=\\\"email\\\" [(ngModel)]=\\\"signUpRequest.email\\\" placeholder=\\\"{{'email_address' | translate}}\\\"></ion-input>\\r\\n                </div>\\r\\n            </ion-item>\\r\\n            <ion-button size=\\\"large\\\" shape=\\\"block\\\" class=\\\"btn\\\" (click)=\\\"requestSignUp()\\\">\\r\\n                {{'continue' | translate}}\\r\\n            </ion-button>\\r\\n        </ion-list>\\r\\n        <h4 class=\\\"ion-text-center\\\" (click)=\\\"goBack()\\\">\\r\\n            {{'back_to_sign_in' | translate}}\\r\\n        </h4>\\r\\n        <div class=\\\"form\\\">\\r\\n            <p class=\\\"ion-text-center\\\">{{'will_send_an_otp_on_above' | translate}}\\r\\n                <br>{{'given_phone_number' | translate}}\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<!-- <ion-footer class=\\\"ion-no-border\\\">\\r\\n\\t<div class=\\\"form\\\">\\r\\n\\t\\t<p class=\\\"ion-text-center\\\">{{'will_send_an_otp_on_above' | translate}} <br>{{'given_phone_number' | translate}}\\r\\n\\t\\t</p>\\r\\n\\t</div>\\r\\n</ion-footer> -->\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RegisterPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPageRoutingModule } from './register-routing.module';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n\tTranslateModule,  \r\n    RegisterPageRoutingModule\r\n  ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","export default \".form {\\n  padding-top: 50px;\\n}\\n.form ion-item {\\n  background: var(--info_field_bg);\\n}\\n.form ion-item.item-input ion-label {\\n  max-width: unset !important;\\n  width: -webkit-fit-content !important;\\n  width: -moz-fit-content !important;\\n  width: fit-content !important;\\n  min-width: -webkit-fit-content;\\n  min-width: -moz-fit-content;\\n  min-width: fit-content;\\n}\\n.form ion-item.item-select {\\n  padding: 2px 13px;\\n}\\n.form ion-item.item-select ion-label {\\n  display: none;\\n}\\n.form p {\\n  color: var(--text-light) !important;\\n  margin: 0;\\n  font-size: 1rem !important;\\n  letter-spacing: 0;\\n  font-weight: 500;\\n  line-height: 19px;\\n  margin-bottom: 50px;\\n  opacity: 0.8;\\n}\\n.form .button.btn.button-block {\\n  margin-top: 25px;\\n}\\n.form ion-list {\\n  margin-bottom: 28px;\\n}\\n.form h4 {\\n  margin: 0;\\n  font-size: 1rem;\\n  font-weight: 500;\\n}\\nion-footer .form {\\n  padding-top: 0px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVnaXN0ZXIvRjpcXGZpdmVyXFxCZXJuYXJkXFxBZ29jYXJyeVxcYWdvY2FycnktY3VzdG9tZXIvc3JjXFxhcHBcXHJlZ2lzdGVyXFxyZWdpc3Rlci5wYWdlLnNjc3MiLCJzcmMvYXBwL3JlZ2lzdGVyL3JlZ2lzdGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFTQTtFQUNJLGlCQUFBO0FDUko7QURVSTtFQUNJLGdDQUFBO0FDUlI7QURZWTtFQUNJLDJCQUFBO0VBQ0EscUNBQUE7RUFBQSxrQ0FBQTtFQUFBLDZCQUFBO0VBQ0EsOEJBQUE7RUFBQSwyQkFBQTtFQUFBLHNCQUFBO0FDVmhCO0FEY1E7RUFDSSxpQkFBQTtBQ1paO0FEY1k7RUFDSSxhQUFBO0FDWmhCO0FEaUJJO0VBQ0ksbUNBQUE7RUFDQSxTQUFBO0VBQ0EsMEJBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7QUNmUjtBRGtCSTtFQUNJLGdCQUFBO0FDaEJSO0FEbUJJO0VBQ0ksbUJBQUE7QUNqQlI7QURvQkk7RUFDSSxTQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FDbEJSO0FEdUJJO0VBQ0ksMkJBQUE7QUNwQlIiLCJmaWxlIjoic3JjL2FwcC9yZWdpc3Rlci9yZWdpc3Rlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvL2lvbi1oZWFkZXIgaW9uLXRvb2xiYXIgaW9uLXRpdGxlIHtcclxuLy8gICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7XHJcbi8vICAgIGxlZnQ6IDA7XHJcbi8vICAgIHRvcDogMDtcclxuLy8gICAgd2lkdGg6IDEwMCU7XHJcbi8vICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuLy8gICAgcGFkZGluZzogMCAxNXB4ICFpbXBvcnRhbnQ7XHJcbi8vfVxyXG5cclxuLmZvcm0ge1xyXG4gICAgcGFkZGluZy10b3A6IDUwcHg7XHJcblxyXG4gICAgaW9uLWl0ZW0ge1xyXG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWluZm9fZmllbGRfYmcpO1xyXG4vLyAgICAgICAgcGFkZGluZzogMnB4IDIwcHg7XHJcblxyXG4gICAgICAgICYuaXRlbS1pbnB1dCB7XHJcbiAgICAgICAgICAgIGlvbi1sYWJlbCB7XHJcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IHVuc2V0ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogZml0LWNvbnRlbnQgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICYuaXRlbS1zZWxlY3Qge1xyXG4gICAgICAgICAgICBwYWRkaW5nOiAycHggMTNweDtcclxuXHJcbiAgICAgICAgICAgIGlvbi1sYWJlbCB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHAge1xyXG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KSAhaW1wb3J0YW50O1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICBmb250LXNpemU6IDFyZW0gIWltcG9ydGFudDtcclxuICAgICAgICBsZXR0ZXItc3BhY2luZzogMDtcclxuICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxOXB4O1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDUwcHg7XHJcbiAgICAgICAgb3BhY2l0eTogMC44O1xyXG4gICAgfVxyXG5cclxuICAgIC5idXR0b24uYnRuLmJ1dHRvbi1ibG9jayB7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogMjVweDtcclxuICAgIH1cclxuXHJcbiAgICBpb24tbGlzdCB7XHJcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjhweDtcclxuICAgIH1cclxuXHJcbiAgICBoNCB7XHJcbiAgICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMXJlbTtcclxuICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5pb24tZm9vdGVyIHtcclxuICAgIC5mb3JtIHtcclxuICAgICAgICBwYWRkaW5nLXRvcDogMHB4ICFpbXBvcnRhbnQ7XHJcbiAgICB9XHJcbn0iLCIuZm9ybSB7XG4gIHBhZGRpbmctdG9wOiA1MHB4O1xufVxuLmZvcm0gaW9uLWl0ZW0ge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbmZvX2ZpZWxkX2JnKTtcbn1cbi5mb3JtIGlvbi1pdGVtLml0ZW0taW5wdXQgaW9uLWxhYmVsIHtcbiAgbWF4LXdpZHRoOiB1bnNldCAhaW1wb3J0YW50O1xuICB3aWR0aDogZml0LWNvbnRlbnQgIWltcG9ydGFudDtcbiAgbWluLXdpZHRoOiBmaXQtY29udGVudDtcbn1cbi5mb3JtIGlvbi1pdGVtLml0ZW0tc2VsZWN0IHtcbiAgcGFkZGluZzogMnB4IDEzcHg7XG59XG4uZm9ybSBpb24taXRlbS5pdGVtLXNlbGVjdCBpb24tbGFiZWwge1xuICBkaXNwbGF5OiBub25lO1xufVxuLmZvcm0gcCB7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LWxpZ2h0KSAhaW1wb3J0YW50O1xuICBtYXJnaW46IDA7XG4gIGZvbnQtc2l6ZTogMXJlbSAhaW1wb3J0YW50O1xuICBsZXR0ZXItc3BhY2luZzogMDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgbGluZS1oZWlnaHQ6IDE5cHg7XG4gIG1hcmdpbi1ib3R0b206IDUwcHg7XG4gIG9wYWNpdHk6IDAuODtcbn1cbi5mb3JtIC5idXR0b24uYnRuLmJ1dHRvbi1ibG9jayB7XG4gIG1hcmdpbi10b3A6IDI1cHg7XG59XG4uZm9ybSBpb24tbGlzdCB7XG4gIG1hcmdpbi1ib3R0b206IDI4cHg7XG59XG4uZm9ybSBoNCB7XG4gIG1hcmdpbjogMDtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG5pb24tZm9vdGVyIC5mb3JtIHtcbiAgcGFkZGluZy10b3A6IDBweCAhaW1wb3J0YW50O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavController, AlertController } from '@ionic/angular';\r\nimport { ActivatedRoute, NavigationExtras } from '@angular/router';\r\nimport { SignUpRequest } from 'src/models/auth-signup-request.models';\r\nimport { UiElementsService } from '../services/common/ui-elements.service';\r\nimport { ApiService } from '../services/network/api.service';\r\nimport { ApiServiceShopHour } from '../services/shoup-hour-services/network/api.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Helper } from 'src/models/helper.models';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.page.html',\r\n  styleUrls: ['./register.page.scss']\r\n})\r\nexport class RegisterPage implements OnInit {\r\n  countries: any;\r\n  phoneNumber: string;\r\n  countryCode: string;\r\n  countryCodeCountryText: string;\r\n  phoneNumberFull: string;\r\n  phoneNumberHint: string;\r\n  signUpRequest = new SignUpRequest();\r\n\r\n  constructor(private navCtrl: NavController, private uiElementService: UiElementsService,\r\n    private apiService: ApiService, private apiServiceShophour: ApiServiceShopHour, private route: ActivatedRoute,\r\n    private translate: TranslateService, private alertCtrl: AlertController) { }\r\n\r\n  ngOnInit() {\r\n    this.changeHint();\r\n    this.route.queryParams.subscribe(params => {\r\n      let code = params[\"code\"];\r\n      let phone = params[\"phone\"];\r\n      let name = params[\"name\"];\r\n      let email = params[\"email\"];\r\n      if (code && code.length) this.countryCode = code;\r\n      if (phone && phone.length) this.phoneNumber = phone;\r\n      if (name && name.length) this.signUpRequest.name = name;\r\n      if (email && email.length) this.signUpRequest.email = email;\r\n\r\n      this.apiService.getCountries().subscribe(res => { this.countries = res; this.countryCode = this.countryCode; this.changeHint(true); });\r\n    });\r\n    this.apiService.getCountries().subscribe(res => { this.countries = res; this.changeHint(true); });\r\n  }\r\n\r\n  changeHint(clearPhoneSkip?: boolean) {\r\n    this.phoneNumber = clearPhoneSkip ? this.phoneNumber : \"\";\r\n    if (this.countryCode && this.countryCode.length) {\r\n      for (let country of this.countries) if (country.callingCodes[0] && country.callingCodes[0] == this.countryCode) this.countryCodeCountryText = country.name;\r\n      this.translate.get('enter_phone_number_exluding').subscribe(value => this.phoneNumberHint = (value + \" (+\" + this.countryCode + \")\"));\r\n    } else {\r\n      this.translate.get('enter_phone_number').subscribe(value => this.phoneNumberHint = value);\r\n    }\r\n  }\r\n\r\n  requestSignUp() {\r\n    var reg = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/;\r\n    if (this.signUpRequest.name.length < 2) {\r\n      this.translate.get(\"err_valid_name\").subscribe(value => this.uiElementService.presentToast(value));\r\n    } else if (this.signUpRequest.email.length <= 5 || !reg.test(this.signUpRequest.email)) {\r\n      this.translate.get(\"err_valid_email\").subscribe(value => this.uiElementService.presentToast(value));\r\n    } else if (!this.countryCode || !this.countryCode.length || !this.phoneNumber || !this.phoneNumber.length) {\r\n      this.translate.get(\"err_valid_phone\").subscribe(value => this.uiElementService.presentToast(value));\r\n    } else {\r\n      this.alertPhone();\r\n    }\r\n  }\r\n\r\n  alertPhone() {\r\n    this.translate.get(['alert_phone', 'no', 'yes']).subscribe(text => {\r\n      this.phoneNumberFull = \"+\" + this.countryCode + Helper.formatPhone(this.phoneNumber);\r\n      this.alertCtrl.create({\r\n        header: this.phoneNumberFull,\r\n        message: text['alert_phone'],\r\n        buttons: [{\r\n          text: text['no'],\r\n          role: 'cancel',\r\n          handler: () => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        }, {\r\n          text: text['yes'],\r\n          handler: () => {\r\n            this.signUpRequest.password = String(Math.floor(100000 + Math.random() * 900000));\r\n            this.signUpRequest.mobile_number = this.phoneNumberFull;\r\n            this.signUp();\r\n          }\r\n        }]\r\n      }).then(alert => alert.present());\r\n    });\r\n  }\r\n\r\n  signUp() {\r\n    this.translate.get('signing_up').subscribe(value => {\r\n      this.uiElementService.presentLoading(value);\r\n\r\n      this.apiService.createUser(this.signUpRequest).subscribe(res => {\r\n        this.apiServiceShophour.createUser(this.signUpRequest).subscribe(resShophour =>{\r\n          console.log(\"shophour user\",resShophour);\r\n        })\r\n        console.log(res);\r\n        this.uiElementService.dismissLoading();\r\n\r\n        let navigationExtras: NavigationExtras = { queryParams: { phoneNumberFull: res.user.mobile_number } };\r\n        this.navCtrl.navigateForward(['./verification'], navigationExtras);\r\n      }, err => {\r\n        console.log(err);\r\n        this.uiElementService.dismissLoading();\r\n        let errMsg;\r\n        this.translate.get(['invalid_credentials', 'invalid_credential_email', 'invalid_credential_phone', 'invalid_credential_password']).subscribe(value => {\r\n          errMsg = value['invalid_credentials'];\r\n          if (err && err.error && err.error.errors) {\r\n            if (err.error.errors.email) {\r\n              errMsg = value['invalid_credential_email'];\r\n            } else if (err.error.errors.mobile_number) {\r\n              errMsg = value['invalid_credential_phone'];\r\n            } else if (err.error.errors.password) {\r\n              errMsg = value['invalid_credential_password'];\r\n            }\r\n          }\r\n          this.uiElementService.presentErrorAlert(errMsg);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  goBack() {\r\n    this.navCtrl.pop();\r\n  }\r\n\r\n  // pickImage() {\r\n  //   this.translate.get([\"image_pic_header\", \"image_pic_subheader\", \"image_pic_camera\", \"image_pic_gallery\"]).subscribe(values => {\r\n  //     this.alertCtrl.create({\r\n  //       header: values[\"image_pic_header\"],\r\n  //       message: values[\"image_pic_subheader\"],\r\n  //       buttons: [{\r\n  //         text: values[\"image_pic_camera\"],\r\n  //         handler: () => {\r\n  //           this.getImageCamera();\r\n  //         }\r\n  //       }, {\r\n  //         text: values[\"image_pic_gallery\"],\r\n  //         handler: () => {\r\n  //           this.getImageGallery();\r\n  //         }\r\n  //       }]\r\n  //     }).then(alert => alert.present());\r\n  //   });\r\n  // }\r\n\r\n  // getImageGallery() {\r\n  //   this.platform.ready().then(() => {\r\n  //     if (this.platform.is(\"cordova\")) {\r\n  //       this.imagePicker.getPictures({\r\n  //         maximumImagesCount: 1,\r\n  //       }).then((results) => {\r\n  //         if (results && results[0]) {\r\n  //           this.reduceImages(results).then(() => {\r\n  //             console.log('cropped_images');\r\n  //           });\r\n  //         }\r\n  //       }, (err) => {\r\n  //         console.log(\"getPictures\", JSON.stringify(err));\r\n  //       });\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  // reduceImages(selected_pictures: any): any {\r\n  //   return selected_pictures.reduce((promise: any, item: any) => {\r\n  //     return promise.then((result) => {\r\n  //       return this.cropService.crop(item, { quality: 100 }).then(cropped_image => this.uploadImage(cropped_image));\r\n  //     });\r\n  //   }, Promise.resolve());\r\n  // }\r\n\r\n  // getImageCamera() {\r\n  //   const options: CameraOptions = {\r\n  //     quality: 75,\r\n  //     destinationType: this.platform.is(\"android\") ? this.camera.DestinationType.FILE_URI : this.camera.DestinationType.NATIVE_URI,\r\n  //     encodingType: this.camera.EncodingType.JPEG,\r\n  //     mediaType: this.camera.MediaType.PICTURE\r\n  //   }\r\n  //   this.camera.getPicture(options).then((imageData) => this.uploadImage(imageData), (err) => {\r\n  //     this.translate.get('camera_err').subscribe(value => this.uiElementService.presentToast(value));\r\n  //     console.log(\"getPicture\", JSON.stringify(err));\r\n  //   });\r\n  // }\r\n\r\n  // uploadImage(imageUri) {\r\n  //   this.translate.get([\"uploading_image\", \"uploading_fail\"]).subscribe(values => {\r\n  //     this.uiElementService.presentLoading(values[\"uploading_image\"]);\r\n  //     this.fireUpService.resolveUriAndUpload(imageUri).then(res => {\r\n  //       console.log(\"resolveUriAndUpload\", res);\r\n  //       this.uiElementService.dismissLoading();\r\n  //       this.signUpRequest.image_url = String(res);\r\n  //     }, err => {\r\n  //       console.log(\"resolveUriAndUpload\", err);\r\n  //       this.uiElementService.dismissLoading();\r\n  //       this.uiElementService.presentErrorAlert(values[\"uploading_fail\"]);\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n}","import { Constants } from './constants.models';\r\n\r\nexport class SignUpRequest {\r\n    name: string;\r\n    email: string;\r\n    password: string;\r\n    mobile_number: string;\r\n    image_url: string;\r\n    role: string;\r\n\r\n    constructor() {\r\n        this.name = \"\";\r\n        this.email = \"\";\r\n        this.password = \"\";\r\n        this.mobile_number = \"\";\r\n        this.role = Constants.ROLE_USER;\r\n    }\r\n}"]}